<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  {% seo %}

  {% if site.google_analytics %}
    <link rel="dns-prefetch" href="https://www.google-analytics.com">
    <link rel="preconnect" href="https://www.google-analytics.com">
  {% endif %}
  <!-- # Add any other third-party domains you use for fonts, external scripts, etc. -->

  <link rel="preload" href="{{ '/assets/css/main.css' | relative_url }}" as="style">

  <style>
    /*
      CRITICAL CSS FOR LIGHTHOUSE 100 SCORE:
      
      This inline CSS prevents layout shifts (CLS) by defining typography and spacing
      before the main CSS loads. Include styles for:
      
      1. Body font-family, font-size, line-height (prevents font loading shifts)
      2. Heading margins and line-heights (prevents typography shifts) 
      3. Paragraph margins (prevents content jumping)
      4. Any above-the-fold layout containers

      This CSS goes in the <head> so it loads BEFORE everything else.
      It stops the page from "jumping around" while it loads.
      
      WHY: When fonts and CSS load, text can change size and move things around.
      This makes Google Lighthouse angry and gives you a bad score.
      
      WHAT TO DO:
      - When you change fonts → update the font-family here too
      - When you change text sizes → update font-size and line-height here
      - When you change spacing → update margins here
      - When you change layout → update .wrapper here
      
      RULE: Only put styles here that people see immediately when the page loads!
      Everything else goes in main.css
      
      Keep this minimal - only styles visible on initial page load!
      Remove or modify these when customizing your template.
    */
    body { 
      font-family: system-ui, sans-serif; 
      margin: 0; 
      padding: 20px; 
      line-height: 1.6;
      font-size: 16px;
    }
    
    h1, h2, h3, h4, h5, h6 {
      margin: 0 0 1rem 0;
      line-height: 1.2;
    }
    
    p {
      margin: 0 0 1rem 0;
    }
    
    .wrapper {
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
    }
  </style>

  <!-- 
    SMART CSS LOADING FOR PERFORMANCE:
    
    Line 1: Loads CSS without blocking page render (media="print" trick + onload switch)
    Line 2: Fallback for users with JavaScript disabled (accessibility)
    
    Both lines needed for Lighthouse 100 + compatibility!
  -->
  <link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url }}" media="print" onload="this.media='all'">
  <noscript>
    <link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url }}">
  </noscript>

  {% feed_meta %}

  {% if jekyll.env == 'production' and site.google_analytics %}
    {% include google-analytics.html %} {# This include should contain your GA script #}
  {% endif %}

  <link rel="icon" type="image/png" href="/assets/favicon.png">
  <link rel="apple-touch-icon" href="/assets/apple-touch-icon.png">

</head>